(this.webpackJsonpstrangers_things_react=this.webpackJsonpstrangers_things_react||[]).push([[0],{20:function(e,t,a){e.exports=a(31)},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),s=a.n(l),c=a(3),o=a(7),m=a.n(o),i=a(9),u=a(4),p=a(1),h="https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT",d=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(""),o=Object(u.a)(s,2),d=o[0],f=o[1],N=Object(n.useState)([]),j=Object(u.a)(N,2),O=j[0],k=j[1],S=Object(n.useState)({}),w=Object(u.a)(S,2),x=w[0],P=w[1],C=Object(n.useState)([]),T=Object(u.a)(C,2),L=T[0],D=T[1],F={loggedIn:a,setLoggedIn:l,token:d,setToken:f,posts:O,setPosts:k,userData:x,setUserData:P,messages:L,setMessages:D};return Object(n.useEffect)((function(){try{(function(){var e=Object(i.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/posts/"));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,(n=a.data.posts)&&k(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}catch(e){console.error(e)}try{(function(){var e=Object(i.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/users/me"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,(n=a.data)&&(P(n),r=n.messages,D(r));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}catch(e){console.error(e)}}),[d]),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"content"},r.a.createElement("header",{className:"page-header"},r.a.createElement(c.b,{to:"/home",className:"logo"},r.a.createElement("h1",null,"Stranger's Things")),r.a.createElement("div",{id:"nav"},r.a.createElement("span",{className:"link-bar"},r.a.createElement(c.b,{to:"/posts",className:"nav-link"},"Posts"),r.a.createElement(c.b,{to:"/home",className:"nav-link"},"Home"),d?r.a.createElement("button",{onClick:function(){f(""),l(!1)},className:"nav-link logout"},"Log out"):r.a.createElement(c.b,{to:"/account/login",className:"nav-link"},"Login/Register")))),r.a.createElement("div",{id:"content"},r.a.createElement(p.a,{exact:!0,path:"/account/:method"},r.a.createElement(g,F)),r.a.createElement(p.a,{exact:!0,path:"/"},r.a.createElement(E,F)),r.a.createElement(p.a,{exact:!0,path:"/home"},r.a.createElement(E,F)),r.a.createElement(p.a,{exact:!0,path:"/posts"},r.a.createElement(b,F)),r.a.createElement(p.a,{exact:!0,path:"/search"},r.a.createElement(v,F)),r.a.createElement(p.a,{exact:!0,path:"/write"},r.a.createElement(y,F)))))},E=function(e){var t=e.loggedIn,a=e.messages,n=e.userData;return t?r.a.createElement(r.a.Fragment,null,n?r.a.createElement("h2",{className:"header"},"Welcome ","".concat(n.username)," "):"",r.a.createElement(f,{userData:n,messages:a})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"header"},"Welcome Guest!"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(c.b,{to:"/account/login",className:"link-to-reg-login"},"Click here")," to log in or register!"),r.a.createElement("div",null,r.a.createElement(c.b,{to:"/posts",className:"link-to-reg-login"},"Click here")," to view the posts!"))},g=function(e){var t=e.setLoggedIn,a=e.setToken,l=Object(n.useState)(""),s=Object(u.a)(l,2),o=s[0],h=s[1],d=Object(n.useState)(""),E=Object(u.a)(d,2),g=E[0],f=E[1],b=Object(n.useState)(""),v=Object(u.a)(b,2),N=v[0],j=v[1],y=Object(p.f)(),O=Object(p.e)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"content"},r.a.createElement("header",{className:"post-header"},r.a.createElement("span",{className:"placeholder"}),"register"===y.method?r.a.createElement("h3",{className:"header"},"Register a new account"):r.a.createElement("h3",{className:"header"},"Login to your account"),r.a.createElement("span",{className:"placeholder"})),r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"log-reg",onSubmit:function(){var e=Object(i.a)(m.a.mark((function e(n){var r,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,fetch("".concat("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT","/users/").concat(y.method),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:o,password:g}})});case 4:return r=e.sent,e.next=7,r.json();case 7:(l=e.sent).data&&(a(l.data.token),t(!0),l.data.token&&O.push("/profile")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("fieldset",{className:"input-fieldset"},r.a.createElement("label",null,"User name"),r.a.createElement("input",{className:"input-field",type:"text",name:"Login Name",placeholder:"enter your user name",onChange:function(e){return h(e.target.value)}})),r.a.createElement("fieldset",{className:"input-fieldset"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{className:"input-field",type:"password",name:"Password",placeholder:"password (min length 6 chars)",onChange:function(e){return f(e.target.value)}})),"register"===y.method?r.a.createElement("fieldset",{className:"input-fieldset"},r.a.createElement("label",null,"Verify Password"),r.a.createElement("input",{className:"input-field",type:"password",name:"Verify Password",placeholder:"re-enter your password",onChange:function(e){return j(e.target.value)}})):"","register"===y.method?r.a.createElement("button",{className:"post-button",type:"submit",disabled:!g||!o||g.length<6||g!==N},"Login"):r.a.createElement("button",{className:"post-button",type:"submit",disabled:!g||!o||g.length<6},"Login")),"register"===y.method?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Already have an account yet? "),r.a.createElement(c.b,{to:"/account/login",className:"link-to-reg-login"},"Click here to log in!")):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Already have an account yet? "),r.a.createElement(c.b,{to:"/account/register",className:"link-to-reg-login"},"Click here to register!")))))},f=function(e){var t=e.messages;return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"content"},r.a.createElement("header",{className:"message-header"},r.a.createElement("h2",{className:"header"},"Messages")),t.map((function(e){return r.a.createElement(N,{key:e._id,message:e})}))))},b=function(e){var t=e.posts,a=e.token;return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"content"},r.a.createElement("header",{className:"post-header"},r.a.createElement(c.b,{to:"/search",className:"post-button"},"Search Posts"),r.a.createElement("h2",{className:"header"},"Posts"),a?r.a.createElement(c.b,{to:"/write",className:"post-button"},"New Post"):r.a.createElement("span",{className:"post-button disabled"},"New Post")),t.map((function(e){return r.a.createElement(j,{key:e._id,post:e})}))))},v=function(){return r.a.createElement("span",null,"Search")},N=function(e){var t=e.message;return t?r.a.createElement("div",{className:"message-listing"},r.a.createElement("h3",{className:"message-content"},t.content),r.a.createElement("span",{className:"message-sender"},t.fromUser.username)):"Loading..."},j=function(e){var t=e.post;return t?r.a.createElement("div",{className:"post-listing"},r.a.createElement("h3",{className:"post-title"},t.title),r.a.createElement("span",{className:"description"},t.description)):"Loading..."},y=function(e){var t=e.token,a=Object(n.useState)(""),l=Object(u.a)(a,2),s=l[0],c=l[1],o=Object(n.useState)(""),p=Object(u.a)(o,2),h=p[0],d=p[1],E=Object(n.useState)(""),g=Object(u.a)(E,2),f=g[0],b=g[1],v=Object(n.useState)(""),N=Object(u.a)(v,2),j=N[0],y=N[1],O=Object(n.useState)(!1),k=Object(u.a)(O,2),S=k[0],w=k[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Post a new listing!"),r.a.createElement("form",{onSubmit:function(){var e=Object(i.a)(m.a.mark((function e(a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault();try{fetch("".concat("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT","/posts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({post:{location:s,title:h,description:f,price:j,willDeliver:S}})})}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Title"),r.a.createElement("input",{className:"input-field",type:"text",name:"title",value:h,placeholder:"Title",onChange:function(e){return d(e.target.value)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Description"),r.a.createElement("input",{className:"input-field",type:"text",name:"description",value:f,placeholder:"Description",style:{height:100},onChange:function(e){return b(e.target.value)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Price"),r.a.createElement("input",{className:"input-field",type:"number",name:"price",min:"1",step:"any",value:j,placeholder:"$0.00",onChange:function(e){return y("$"+e.target.value)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Location"),r.a.createElement("input",{className:"input-field",type:"text",name:"title",value:s,placeholder:"Location",onChange:function(e){return c(e.target.value)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Will deliver item"),r.a.createElement("select",{name:"willDeliver",placeholder:"No",value:S,onChange:function(e){return w(e.target.value)}},r.a.createElement("option",{value:"false"},"No"),r.a.createElement("option",{value:"true"},"Yes"))),r.a.createElement("button",{disable:!h||!f})))};s.a.render(r.a.createElement(c.a,null,r.a.createElement(d,null)),document.querySelector("#app"))}},[[20,1,2]]]);
//# sourceMappingURL=main.b663c54a.chunk.js.map