(this.webpackJsonpstrangers_things_react=this.webpackJsonpstrangers_things_react||[]).push([[0],{20:function(e,t,a){e.exports=a(31)},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),c=a.n(l),s=a(5),o=function(){return r.a.createElement("span",null,"Account")},i=a(3),u=a(1),m=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),m=Object(i.a)(c,2),p=(m[0],m[1]);return r.a.createElement("main",{className:"content"},r.a.createElement("header",{className:"page-header"},r.a.createElement("h1",{className:"logo"},"Stranger's Things"),r.a.createElement("div",{id:"nav"},r.a.createElement("span",{className:"link-bar"},r.a.createElement(s.b,{to:"/posts",className:"nav-link"},"Posts"),r.a.createElement(s.b,{to:"/account",className:"nav-link"},"Account"),a?r.a.createElement("button",{onClick:function(){return l("")},className:"nav-link logout"},"Log out"):r.a.createElement(s.b,{to:"/account/login",className:"nav-link"},"Login/Register")))),r.a.createElement("div",{id:"content"},r.a.createElement(u.a,{path:"/account"},r.a.createElement(o,null)),r.a.createElement(u.a,{path:"/account/:method"},r.a.createElement(f,{setToken:l,setUser:p})),r.a.createElement(u.a,{path:"/posts"},r.a.createElement(b,{token:a})),r.a.createElement(u.a,{path:"/search"},r.a.createElement(g,null)),r.a.createElement(u.a,{path:"/write"},r.a.createElement(N,{token:a})),r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(b,{token:a}))))},p=a(8),d=a.n(p),h=a(10),E="https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/",f=function(e){var t=e.setUser,a=e.setToken,l=Object(n.useState)(""),c=Object(i.a)(l,2),o=c[0],m=c[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),b=f[0],g=f[1],N=Object(n.useState)(""),v=Object(i.a)(N,2),j=v[0],O=v[1],y=Object(u.f)(),k=Object(u.e)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"content"},r.a.createElement("header",{className:"post-header"},r.a.createElement("span",{className:"placeholder"}),"register"===y.method?r.a.createElement("h3",{className:"header"},"Register a new account"):r.a.createElement("h3",{className:"header"},"Login to your account"),r.a.createElement("span",{className:"placeholder"})),r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{className:"log-reg",onSubmit:function(){var e=Object(h.a)(d.a.mark((function e(n){var r,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,fetch("".concat(E,"/users/").concat(y.method),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:o,password:b}})});case 3:return r=e.sent,e.next=6,r.json();case 6:(l=e.sent).data&&(a(l.data.token),t(l.data.user),console.log("respObj: ",l),l.data.token&&k.push("/"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("fieldset",{className:"input-fieldset"},r.a.createElement("label",null,"User name"),r.a.createElement("input",{className:"input-field",type:"text",name:"Login Name",placeholder:"enter your user name",onChange:function(e){return m(e.target.value)}})),r.a.createElement("fieldset",{className:"input-fieldset"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{className:"input-field",type:"password",name:"Password",placeholder:"password (min length 6 chars)",onChange:function(e){return g(e.target.value)}})),"register"===y.method?r.a.createElement("fieldset",{className:"input-fieldset"},r.a.createElement("label",null,"Verify Password"),r.a.createElement("input",{className:"input-field",type:"password",name:"Verify Password",placeholder:"re-enter your password",onChange:function(e){return O(e.target.value)}})):"","register"===y.method?r.a.createElement("button",{className:"post-button",type:"submit",disabled:!b||!o||b.length<6||b!==j},"Login"):r.a.createElement("button",{className:"post-button",type:"submit",disabled:!b||!o||b.length<6},"Login")),"register"===y.method?r.a.createElement(s.b,{to:"/account/login",className:"link-to-reg-login"},"Already have an account yet? Click here to log in!"):r.a.createElement(s.b,{to:"/account/register",className:"link-to-reg-login"},"Don't have an account yet? Click here to register!"))))},b=function(e){var t=e.token,a=Object(n.useState)([]),l=Object(i.a)(a,2),c=l[0],o=l[1];return Object(n.useEffect)((function(){(function(){var e=Object(h.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/posts/"));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,o(a.data.posts);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"content"},r.a.createElement("header",{className:"post-header"},r.a.createElement(s.b,{to:"/search",className:"post-button"},"Search Posts"),r.a.createElement("h2",{className:"header"},"Posts"),t?r.a.createElement(s.b,{to:"/write",className:"post-button"},"New Post"):r.a.createElement("span",{className:"post-button disabled"},"New Post")),c.map((function(e){return r.a.createElement("div",{key:e._id,className:"post-listing"},r.a.createElement("h3",{className:"post-title"},e.title),r.a.createElement("span",{className:"description"},e.description))}))))},g=function(){return r.a.createElement("span",null,"Search")},N=function(e){var t=e.token,a=Object(n.useState)(""),l=Object(i.a)(a,2),c=l[0],s=l[1],o=Object(n.useState)(""),u=Object(i.a)(o,2),m=u[0],p=u[1],f=Object(n.useState)(""),b=Object(i.a)(f,2),g=b[0],N=b[1],v=Object(n.useState)(!1),j=Object(i.a)(v,2),O=j[0],y=j[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Post a new listing!"),r.a.createElement("form",{onSubmit:function(){var e=Object(h.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),fetch("".concat(E,"/posts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({post:{title:c,description:m,price:g,willDeliver:O}})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch(console.error);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Title"),r.a.createElement("input",{className:"input-field",type:"text",name:"title",value:c,placeholder:"Title",onChange:function(e){return s(e.target.value)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Description"),r.a.createElement("input",{className:"input-field",type:"text",name:"description",value:m,placeholder:"Description",onChange:function(e){return p(e.target.value)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Price"),r.a.createElement("input",{className:"input-field",type:"number",name:"price",min:"1",step:"any",value:g,placeholder:"$0.00",onChange:function(e){return N(e.target.value)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Will deliver item"),r.a.createElement("select",{name:"willDeliver",placeholder:"No",value:O,onChange:function(e){return y(e.target.value)}},r.a.createElement("option",{value:"false"},"No"),r.a.createElement("option",{value:"true"},"Yes"))),""===c||""===m?r.a.createElement("button",{disable:"true"}):r.a.createElement("button",{type:"submit"},"Post")))};c.a.render(r.a.createElement(s.a,null,r.a.createElement(m,null)),document.querySelector("#app"))}},[[20,1,2]]]);
//# sourceMappingURL=main.0ed6709c.chunk.js.map